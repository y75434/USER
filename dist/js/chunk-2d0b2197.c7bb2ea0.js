(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0b2197"],{2355:function(t,a,s){"use strict";s.r(a);var i=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:" container mt-5 mb-5"},[s("loading",{attrs:{active:t.isLoading},on:{"update:active":function(a){t.isLoading=a}}}),s("div",[s("h3",{staticClass:"mx-5"},[t._v("我的購物車")]),s("div",{staticClass:"row justify-content-center"},[t.carts.length>0?s("div",{staticClass:"col-md-7"},[s("table",{staticClass:"table"},[t._m(0),s("tbody",t._l(t.carts,(function(a){return s("tr",{key:a.id,staticClass:"cart"},[s("th",{staticClass:"border-0 px-0 font-weight-normal py-4 px-4",attrs:{scope:"row"}},[s("img",{staticStyle:{width:"90px",height:"90px","object-fit":"cover"},attrs:{src:a.product.imageUrl[0]}}),s("p",{staticClass:"mb-0 font-weight-bold ml-3 d-inline-block"},[t._v(t._s(a.product.title))])]),s("td",{staticClass:"border-0 align-middle",staticStyle:{"max-width":"160px"}},[s("div",{staticClass:"input-group pr-5"},[s("div",{staticClass:"input-group-prepend"},[s("button",{staticClass:"btn btn-outline-dark border-1 py-2",attrs:{type:"button",disabled:1===a.quantity},on:{click:function(s){return s.preventDefault(),t.quantityUpdate(a.product.id,a.quantity-1)}}},[s("i",{staticClass:"fas fa-minus"})])]),s("input",{directives:[{name:"model",rawName:"v-model.number",value:a.quantity,expression:"item.quantity",modifiers:{number:!0}}],staticClass:"form-control-plaintext  text-center  ",attrs:{type:"number",min:"1",readonly:"","aria-describedby":"button-addon1",value:"1"},domProps:{value:a.quantity},on:{input:function(s){s.target.composing||t.$set(a,"quantity",t._n(s.target.value))},blur:function(a){return t.$forceUpdate()}}}),s("div",{staticClass:"input-group-prepend"},[s("button",{staticClass:"btn btn-outline-dark border-1 py-2",attrs:{type:"button"},on:{click:function(s){return s.preventDefault(),t.quantityUpdate(a.product.id,a.quantity+1)}}},[s("i",{staticClass:"fas fa-plus"})])])])]),s("td",{staticClass:"border-0 align-middle"},[s("p",{staticClass:"mb-0 ml-auto"},[t._v(t._s(t._f("money")(a.product.price))+"/"+t._s(a.product.unit))])]),s("td",{staticClass:"border-0 align-middle"},[s("button",{staticClass:"btn btn-sm",attrs:{type:"button"},on:{click:function(s){return s.preventDefault(),t.removeCartItem(a.product.id)}}},[s("i",{staticClass:"fas fa-times"})])])])})),0)])]):s("div",[s("h4",{staticClass:"font-weight-bold"},[t._v("目前購物車是空的")]),s("p",{staticClass:"font-weight-normal text-muted mt-2"},[s("router-link",{staticClass:"text-dark mt-5 mt-3",attrs:{to:"/products"}},[s("i",{staticClass:"fas fa-chevron-left "}),t._v(" 繼續購物 ")])],1)]),s("div",{staticClass:"col-md-4 "},[s("div",{staticClass:"border p-4 mb-4"},[s("h4",{staticClass:"font-weight-bold mb-4"},[t._v("訂單")]),s("table",{staticClass:"table text-dark "},[s("tbody",[t._m(1),t._l(t.carts,(function(a){return s("tr",{key:a.id,staticClass:"cart"},[s("th",{staticClass:"border-0 px-0 pt-4 font-weight-normal",attrs:{scope:"row"}},[t._v(t._s(a.product.title))]),s("td",{staticClass:"text-right border-0 px-0 pt-4"},[t._v(t._s(t._f("money")(a.product.price*a.quantity)))])])}))],2)]),s("div",{staticClass:"d-flex justify-content-between mt-4  mb-5 border-outline-brown"},[s("p",{staticClass:"mb-0 h4 font-weight-bold"},[t._v("總計")]),s("p",{staticClass:"mb-0 h4 font-weight-bold float-right",attrs:{type:"number"}},[t._v(t._s(t._f("money")(t.cartTotal)))])]),s("div",{staticClass:"   border-outline-brown "},[s("router-link",{staticClass:"btn btn-warning btn-block col-md-8 float-right",attrs:{to:"/order"}},[t._v("前往結帳")])],1)])])])])],1)},e=[function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("thead",[s("tr",[s("th",{staticClass:"border-0 px-3",attrs:{scope:"col"}},[t._v("產品名稱")]),s("th",{staticClass:"border-0 px-3",attrs:{scope:"col"}},[t._v("數量")]),s("th",{staticClass:"border-0",attrs:{scope:"col"}},[t._v("金額")]),s("th",{staticClass:"border-0",attrs:{scope:"col"}},[t._v("移除")])])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("tr",{staticClass:"border-bottom"},[s("th",{staticClass:"border-0 px-0 pt-4 font-weight-normal",attrs:{scope:"row"}},[t._v("品名")]),s("td",{staticClass:"text-right border-0 px-0 pt-4"},[t._v("金額")])])}],r=(s("99af"),s("4160"),s("159b"),{data:function(){return{carts:{},cartTotal:0}},status:{loadingItem:""},created:function(){this.getCart()},methods:{quantityUpdate:function(t,a){var s=this;this.isLoading=!0;var i="".concat("https://course-ec-api.hexschool.io/","/api/").concat("11b11a35-2274-4e22-9f5b-dda3fb171d74","/ec/shopping"),e={product:t,quantity:a};this.$http.patch(i,e).then((function(){s.getCart(),s.$bus.$emit("get-cart")})),this.isLoading=!1},totalUpdate:function(){var t=0;this.carts.forEach((function(a){t+=a.product.price*a.quantity})),this.cartTotal=t},removeCartItem:function(t){var a=this;this.isLoading=!0;var s="".concat("https://course-ec-api.hexschool.io/","/api/").concat("11b11a35-2274-4e22-9f5b-dda3fb171d74","/ec/shopping/").concat(t);this.$http.delete(s).then((function(){a.isLoading=!1,a.getCart(),a.$bus.$emit("get-cart")}))},getCart:function(){var t=this;this.isLoading=!0;var a="".concat("https://course-ec-api.hexschool.io/","/api/").concat("11b11a35-2274-4e22-9f5b-dda3fb171d74","/ec/shopping");this.$http.get(a).then((function(a){t.carts=a.data.data,t.totalUpdate(),t.isLoading=!1}))}}}),o=r,n=s("2877"),c=Object(n["a"])(o,i,e,!1,null,null,null);a["default"]=c.exports}}]);
//# sourceMappingURL=chunk-2d0b2197.c7bb2ea0.js.map