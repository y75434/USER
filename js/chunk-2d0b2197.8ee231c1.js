(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0b2197"],{2355:function(t,s,a){"use strict";a.r(s);var e=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"container"},[a("loading",{attrs:{active:t.isLoading},on:{"update:active":function(s){t.isLoading=s}}}),t._m(0),t.carts.length>0?a("section",{staticClass:"row justify-content-center"},[a("div",{staticClass:"col-md-7 d-md-block d-none"},[a("table",{staticClass:"table table-td"},[t._m(1),a("tbody",t._l(t.carts,(function(s){return a("tr",{key:s.id,staticClass:"cart"},[a("td",{staticClass:"border-0 px-0 font-weight-normal py-4",attrs:{scope:"row"}},[a("img",{staticStyle:{width:"90px",height:"90px","object-fit":"cover"},attrs:{src:s.product.imageUrl[0]}}),a("p",{staticClass:"mb-0 font-weight-bold ml-3 d-inline-block"},[t._v(t._s(s.product.title))])]),a("td",{staticClass:"border-0 align-middle"},[a("div",{staticClass:" d-flex"},[a("select",{directives:[{name:"model",rawName:"v-model.number",value:s.quantity,expression:"item.quantity",modifiers:{number:!0}}],staticClass:"form-control",on:{change:[function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(s){var a="_value"in s?s._value:s.value;return t._n(a)}));t.$set(s,"quantity",a.target.multiple?e:e[0])},t.totalUpdate]}},t._l(10,(function(s){return a("option",{key:s,domProps:{value:s}},[t._v(" "+t._s(s)+" ")])})),0)])]),a("td",{staticClass:"border-0 align-middle"},[a("p",{staticClass:"mb-0 ml-auto"},[t._v(t._s(t._f("money")(s.product.price))+"/"+t._s(s.product.unit))])]),a("td",{staticClass:"border-0 align-middle"},[a("button",{staticClass:"delBtn btn-sm btn btn-outline-danger",on:{click:function(a){return a.preventDefault(),t.removeCartItem(s.product.id)}}},[a("i",{staticClass:"fas fa-trash-alt"})])])])})),0)])]),a("div",{staticClass:"col-md-5 justify-content-center align-items-center"},[a("div",{staticClass:"receipt p-5 mb-5"},[a("h4",{staticClass:"font-weight-bold mb-4"},[t._v("訂單")]),a("table",{staticClass:"table text-dark "},[a("tbody",[t._m(2),t._l(t.carts,(function(s){return a("tr",{key:s.id,staticClass:"cart"},[a("th",{staticClass:"border-0 px-0 pt-4 font-weight-normal",attrs:{scope:"row"}},[t._v(t._s(s.product.title))]),a("td",{staticClass:"text-right border-0 px-0 pt-4"},[t._v(t._s(t._f("money")(s.product.price*s.quantity)))])])}))],2)]),a("div",{staticClass:"d-flex justify-content-between mt-4 border-outline-brown"},[a("p",{staticClass:"mb-4 h4 font-weight-bold"},[t._v("總計")]),a("p",{staticClass:"mb-0 h4 font-weight-bold float-right",attrs:{type:"number"}},[t._v(t._s(t._f("money")(t.cartTotal)))])]),a("div",{staticClass:"mb-4"},[a("router-link",{staticClass:"btn btn-block text-white float-right  goBtn",attrs:{to:"/order"}},[t._v("前往結帳")])],1)])])]):a("section",{staticClass:"row justify-content-center",staticStyle:{height:"80vh"}},[a("div",{staticClass:"justify-content-center align-items-center flex-column h-100 w-100 m-5"},[a("img",{staticClass:"mx-auto mb-4 cart-pic d-flex justify-content-center",attrs:{src:"images/neko.png"}}),a("h3",{staticClass:"text-center text-secondary mb-4"},[t._v("目前購物車是空的")]),a("div",{staticClass:"text-center"},[a("router-link",{staticClass:"goBtn btn",attrs:{to:"/products",type:"button"}},[t._v(" 繼續購物 ")])],1)])])],1)},i=[function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ul",{staticClass:"my-5 process d-flex justify-content-around"},[a("li",{staticClass:"text-center"},[a("span",{staticClass:"num"},[t._v("1")]),a("p",[t._v("購物車內容")])]),a("li",{staticClass:"text-center"},[a("span",{staticClass:"num processNum"},[t._v("2")]),a("p",[t._v("訂單填寫")])]),a("li",{staticClass:"text-center"},[a("span",{staticClass:"num processNum"},[t._v("3")]),a("p",[t._v("結帳")])])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("thead",[a("tr",{staticClass:"border-0"},[a("th",{staticClass:"border-0 px-3",attrs:{scope:"col"}},[t._v("產品名稱")]),a("th",{staticClass:"border-0 px-3",attrs:{scope:"col"}},[t._v("數量")]),a("th",{staticClass:"border-0",attrs:{scope:"col"}},[t._v("金額")]),a("th",{staticClass:"border-0",attrs:{scope:"col"}},[t._v("移除")])])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("tr",{staticClass:"border-bottom"},[a("th",{staticClass:"border-0 px-0 pt-4 font-weight-normal",attrs:{scope:"row"}},[t._v("品名")]),a("td",{staticClass:"text-right border-0 px-0 pt-4"},[t._v("金額")])])}],c=(a("99af"),a("4160"),a("159b"),{data:function(){return{carts:{},cartTotal:0}},status:{loadingItem:""},created:function(){this.getCart()},methods:{quantityUpdate:function(t,s){var a=this;this.isLoading=!0;var e="".concat("https://course-ec-api.hexschool.io/","/api/").concat("11b11a35-2274-4e22-9f5b-dda3fb171d74","/ec/shopping"),i={product:t,quantity:s};this.$http.patch(e,i).then((function(){a.getCart(),a.$bus.$emit("get-cart")})),this.isLoading=!1},totalUpdate:function(){var t=0;this.carts.forEach((function(s){t+=s.product.price*s.quantity})),this.cartTotal=t},removeCartItem:function(t){var s=this;this.isLoading=!0;var a="".concat("https://course-ec-api.hexschool.io/","/api/").concat("11b11a35-2274-4e22-9f5b-dda3fb171d74","/ec/shopping/").concat(t);this.$http.delete(a).then((function(){s.isLoading=!1,s.getCart(),s.$bus.$emit("get-cart")}))},getCart:function(){var t=this;this.isLoading=!0;var s="".concat("https://course-ec-api.hexschool.io/","/api/").concat("11b11a35-2274-4e22-9f5b-dda3fb171d74","/ec/shopping");this.$http.get(s).then((function(s){t.carts=s.data.data,t.totalUpdate(),t.isLoading=!1}))}}}),n=c,r=a("2877"),o=Object(r["a"])(n,e,i,!1,null,null,null);s["default"]=o.exports}}]);
//# sourceMappingURL=chunk-2d0b2197.8ee231c1.js.map